import type React from "react";
import { motion } from "framer-motion";
import { Carousel } from "antd";
import { useNavigateWithChatId } from "@/hooks/useNavigate";
import { FieldSizesRecord } from "@/types/pocketbaseTypes";
import { usePocketBaseFile } from "@/pb/usePbMethods";
import { useTranslation } from "@/hooks/translation";

// Define the Field type
export interface Field {
  created?: string;
  fid?: number;
  id: string;
  name: string;
  images?: string[];
  price: number;
  size?: string;
  stadium?: string;
  status?: string;
  type?: string;
  updated?: string;
  collectionId: string;
  expand?: {
    size?: FieldSizesRecord;
  };
}

// Image Slider Component

// Card component that will be mapped

export const FieldCard: React.FC<{ field: Field }> = ({ field }) => {
  const t = useTranslation();
  const { navigate } = useNavigateWithChatId();
  const { getFileUrl } = usePocketBaseFile();

  return (
    <motion.div
      className="w-full p-2 mt-4  rounded-2xl overflow-hidden bg-white shadow-md"
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 0.3 }}
      whileHover={{ y: -5, transition: { duration: 0.2 } }}
    >
      <div className="min-w-[300px] w-full mx-auto">
        <Carousel autoplay infinite>
          {field?.images?.map((image, index) => (
            <div key={index}>
              <img
                className="rounded-md"
                src={getFileUrl(field.collectionId, field.id, image)}
                alt={`Image ${index}`}
              />
            </div>
          ))}
        </Carousel>
      </div>
      <div className="p-2">
        <div className="w-full flex items-center justify-center gap-2 bg-blue-500/10 p-2 rounded-md">
          <svg
            width="24"
            height="18"
            viewBox="0 0 24 18"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M0.75 16L0.749999 2C0.749999 1.30964 1.30964 0.75 2 0.75L22 0.749999C22.6904 0.749999 23.25 1.30964 23.25 2L23.25 16C23.25 16.6904 22.6904 17.25 22 17.25L2 17.25C1.30964 17.25 0.75 16.6904 0.75 16Z"
              stroke="#0078FF"
              strokeWidth="1.5"
            />
            <path
              d="M0 13L3 13C3.55229 13 4 12.5523 4 12L4 6C4 5.44772 3.55228 5 3 5L-3.49691e-07 5"
              stroke="#0078FF"
              strokeWidth="1.5"
            />
            <path
              d="M24 5L21 5C20.4477 5 20 5.44772 20 6L20 12C20 12.5523 20.4477 13 21 13L24 13"
              stroke="#0078FF"
              strokeWidth="1.5"
            />
            <path
              d="M12 18L12 5.36442e-07"
              stroke="#0078FF"
              strokeWidth="1.5"
            />
            <path
              d="M8.75 9C8.75 7.20508 10.2051 5.75 12 5.75C13.7949 5.75 15.25 7.20507 15.25 9C15.25 10.7949 13.7949 12.25 12 12.25C10.2051 12.25 8.75 10.7949 8.75 9Z"
              stroke="#0078FF"
              strokeWidth="1.5"
            />
          </svg>
          <h1>{field.name}</h1>
        </div>
      </div>
      <div className="mt-4 px-2">
        <div className="flex justify-between items-center">
          <div className="flex items-center gap-5">
            <div className="flex items-center justfiy-start gap-2">
              {field.type == "grass" ? (
                <svg
                  width="24"
                  height="11"
                  viewBox="0 0 24 11"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M22.1521 4.32126L20.0102 4.00373C19.8393 3.97839 19.648 3.94112 19.4395 3.8935C19.4358 3.89263 19.432 3.8917 19.4282 3.89093C19.0394 3.80167 18.5911 3.67661 18.104 3.52595L18.2215 3.1539C18.2894 2.9392 18.182 2.70617 17.9816 2.63349C17.7812 2.56065 17.5639 2.67585 17.4961 2.8906L17.37 3.28974C17.0341 3.17787 16.6859 3.05731 16.3311 2.93077L16.4532 2.54423C16.5211 2.32953 16.4137 2.09649 16.2133 2.02381C16.0131 1.95086 15.7956 2.06617 15.7278 2.28093L15.6057 2.66742C15.2636 2.54122 14.9188 2.41129 14.5759 2.27994L14.7008 1.88469C14.7686 1.66999 14.6612 1.43696 14.4609 1.36428C14.2604 1.29133 14.0431 1.40664 13.9753 1.6214L13.8554 2.00094C13.5068 1.86455 13.1639 1.72844 12.8315 1.59502L12.9583 1.19364C13.0261 0.978938 12.9187 0.745903 12.7184 0.673224C12.5181 0.600271 12.3006 0.715585 12.2328 0.930339L12.1144 1.30501C10.4001 0.606237 9.11316 0.0446126 9.08094 0.0305474C8.89644 -0.0502319 8.68499 0.034214 8.59476 0.224669L8.12451 1.21679C7.86562 1.76298 7.92066 2.45956 8.22633 2.98342C7.93374 3.03706 7.63517 3.06437 7.33272 3.06437C5.67243 3.06437 4.09389 2.20633 3.11004 0.769219C3.03789 0.663811 2.9232 0.601585 2.80126 0.601585H1.26934C1.13556 0.601585 1.01152 0.676398 0.942026 0.798881C0.903523 0.866744 0 2.48928 0 4.97986C0 7.4676 0.876409 9.08844 0.913685 9.15625C0.98257 9.28136 1.10803 9.35814 1.24356 9.35814H2.42308L2.52148 10.6236C2.53803 10.8364 2.70393 11 2.90313 11H4.17973C4.37893 11 4.54483 10.8364 4.56138 10.6236L4.65978 9.35814H5.48691L5.58531 10.6236C5.60186 10.8364 5.76776 11 5.96696 11H7.24356C7.44276 11 7.60866 10.8364 7.62521 10.6236L7.72361 9.35814H14.0731L14.1715 10.6236C14.188 10.8364 14.354 11 14.5532 11H15.8298C16.0289 11 16.1949 10.8364 16.2114 10.6236L16.3098 9.35814H17.137L17.2354 10.6236C17.2519 10.8364 17.4179 11 17.6171 11H18.8937C19.0928 11 19.2588 10.8364 19.2753 10.6236L19.3737 9.35814H20.2009L20.2993 10.6236C20.3158 10.8364 20.4818 11 20.681 11H21.9576C22.1567 11 22.3227 10.8364 22.3392 10.6236L22.4376 9.35814H23.617C23.8286 9.35814 24 9.17442 24 8.94768V6.59463C24 5.49207 23.171 4.47226 22.1521 4.32126ZM11.8319 2.19916L11.8226 2.22861C11.7548 2.44331 11.8622 2.67634 12.0626 2.74902C12.1033 2.76385 12.1447 2.7708 12.1854 2.7708C12.3451 2.7708 12.494 2.66293 12.5481 2.49185L12.5831 2.38114C12.6709 2.41299 12.7652 2.44867 12.8677 2.48835C13.1106 2.58516 13.3583 2.68302 13.609 2.78098L13.5655 2.91879C13.4976 3.13349 13.605 3.36652 13.8054 3.4392C13.8461 3.45403 13.8875 3.46098 13.9282 3.46098C14.0879 3.46098 14.2369 3.35311 14.2909 3.18203L14.3296 3.05972C14.6722 3.19079 15.0169 3.32039 15.3595 3.44659L15.3184 3.57668C15.2506 3.79138 15.358 4.02441 15.5583 4.09709C15.599 4.11193 15.6404 4.11888 15.6812 4.11888C15.8409 4.11888 15.9898 4.01101 16.0439 3.83992L16.0851 3.7094C16.4391 3.83538 16.787 3.95557 17.1242 4.0677L17.087 4.18543C17.0191 4.40013 17.1265 4.63316 17.3269 4.70584C17.3676 4.72067 17.409 4.72762 17.4497 4.72762C17.6094 4.72762 17.7584 4.61975 17.8124 4.44867L17.8581 4.30397C18.2013 4.41031 18.5268 4.50455 18.8292 4.58418C18.6183 4.90927 18.2677 5.11669 17.8861 5.11669C17.7774 5.11669 17.6687 5.09988 17.5631 5.06683C15.5293 4.42984 12.9561 3.41567 10.9501 2.58697C11.305 2.31585 11.538 2.19413 11.8319 2.19916ZM8.80739 1.58856L9.11837 0.932474C9.47525 1.08653 10.0927 1.35082 10.8643 1.67191C10.7259 1.75614 10.5793 1.85985 10.4197 1.98496C10.2649 2.1064 10.105 2.21777 9.94085 2.31929C9.93278 2.32384 9.92497 2.32876 9.91721 2.33396C9.63809 2.50455 9.34657 2.64646 9.0454 2.75816C9.04392 2.75685 9.04254 2.75553 9.04121 2.75438C8.74203 2.48627 8.63489 1.95239 8.80739 1.58856ZM0.765957 4.97986C0.765957 4.5462 0.796698 4.14093 0.846179 3.76878C2.27351 3.87243 3.60271 4.65417 4.44991 5.9051C4.52196 6.01144 4.63716 6.07443 4.75981 6.07443L10.7637 6.07449C11.2629 6.07449 11.6887 6.41769 11.8468 6.89542H0.960306C0.848272 6.35278 0.765957 5.70688 0.765957 4.97986ZM3.82734 10.1791H3.25552L3.19169 9.35814H3.89117L3.82734 10.1791ZM6.89117 10.1791H6.31935L6.25552 9.35814H6.955L6.89117 10.1791ZM15.4774 10.1791H14.9056L14.8418 9.35814H15.5412L15.4774 10.1791ZM18.5412 10.1791H17.9695L17.9056 9.35814H18.6051L18.5412 10.1791ZM21.6051 10.1791H21.0333L20.9695 9.35814H21.6689L21.6051 10.1791ZM22.0799 8.53722H22.0765H20.5623C20.5623 8.53722 20.5591 8.53722 20.5574 8.53722H19.0161H19.0126H17.4985C17.4969 8.53716 17.4937 8.53722 17.4937 8.53722H15.9523H15.9489H14.4347C14.433 8.53716 14.4315 8.53722 14.4298 8.53722H7.36749C7.36555 8.53722 7.36356 8.53716 7.36162 8.53722H5.84763C5.84523 8.53722 4.30371 8.53722 4.30371 8.53722C4.30177 8.53722 4.29978 8.53716 4.29784 8.53722H2.7838C2.7814 8.53722 1.47605 8.53722 1.47605 8.53722C1.39859 8.36488 1.28471 8.08576 1.17069 7.71629L22.0851 7.71635L21.7021 7.30588L22.0851 6.89542L12.6401 6.89536C12.4622 5.95972 11.6885 5.25351 10.7637 5.25351L4.95074 5.25345C3.98645 3.93099 2.54313 3.09808 0.991455 2.9571C1.15757 2.22423 1.37525 1.69128 1.49913 1.42251H2.6112C3.74461 2.96843 5.49493 3.88529 7.33266 3.88529C8.32718 3.88529 9.28565 3.62703 10.1475 3.13426C12.227 4.00203 15.1061 5.15264 17.3482 5.85492C17.5236 5.90987 17.7045 5.93772 17.886 5.93772C18.6275 5.93772 19.3003 5.46952 19.614 4.76675C19.716 4.7864 19.8133 4.80337 19.9052 4.81699L22.0471 5.13453C22.6905 5.22981 23.234 5.89854 23.234 6.59468V6.89542L22.0851 6.89542L21.7021 7.30588L22.0851 7.71635L23.234 7.71635V8.53727L22.0799 8.53722Z"
                    fill="#6C7072"
                  />
                </svg>
              ) : (
                <svg
                  width="24"
                  height="11"
                  viewBox="0 0 24 11"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g clip-path="url(#clip0_22108_10829)">
                    <path
                      d="M23.9912 7.91776C23.9912 6.52255 23.0788 5.35326 21.8689 5.19785C21.2694 5.12087 20.6759 4.99307 20.1051 4.81804C17.894 4.13987 11.882 1.08127 10.0921 0.159993C9.49093 -0.149418 8.80095 -0.00236772 8.33411 0.534575L6.24012 2.94281C6.0173 3.19907 5.69314 3.2871 5.3942 3.1725L3.0401 2.27003C2.86589 2.20324 2.74894 2.01657 2.74894 1.80548V1.54803C2.74894 1.05556 2.4006 0.654943 1.97238 0.654943H1.5228C0.902792 0.654943 0.386652 1.21242 0.347749 1.92396L-0.004485 8.36673C-0.0265612 8.85031 -0.00448806 10.1804 1.09749 10.3253C1.26215 10.332 14.3027 11 14.3027 11C18.227 11 21.1442 10.5569 22.2963 10.172C22.6118 10.0666 23.0013 9.91328 23.5412 9.62004L23.7962 9.3958C23.8862 9.30955 23.9907 8.98895 23.9907 8.92313H23.9912L23.9912 7.91776ZM19.9115 5.65302C20.5183 5.8392 21.1489 5.97499 21.7855 6.05676C21.833 6.06285 21.8798 6.07153 21.9259 6.08204C21.7898 6.13271 21.6348 6.18716 21.4577 6.24446C20.7073 6.48719 19.4183 6.82668 17.5381 7.06515C17.214 7.10623 16.9145 7.25549 16.6721 7.49666L16.1149 8.05096C16.0876 8.04088 16.059 8.03392 16.0291 8.03123C15.0175 7.94175 13.957 7.81653 12.9056 7.6732L15.7777 5.69436C17.0499 5.70698 17.9092 5.5051 18.3898 5.08352C18.9845 5.33078 19.5059 5.52861 19.9115 5.65302ZM9.3281 7.12024C8.93026 7.05232 8.54606 6.98484 8.17977 6.91902L10.6386 5.22502C10.8118 5.10562 11.0158 5.06266 11.2129 5.10389C11.4884 5.16162 11.7579 5.21499 12.0217 5.26442L9.3281 7.12024ZM13.1959 5.46295C13.6273 5.52737 14.0388 5.57868 14.4284 5.61658L11.6947 7.50005C11.2928 7.43995 10.8958 7.37818 10.5069 7.31575L13.1959 5.46295ZM15.3296 8.83214L14.3027 9.85379C13.0504 9.81563 11.9185 9.72895 10.8148 9.64432C9.39176 9.53516 7.92152 9.42283 6.20178 9.41377L5.13978 7.21528C6.95068 7.58166 11.4029 8.43724 15.3296 8.83214ZM1.09749 1.97814C1.11174 1.72074 1.29838 1.51914 1.52266 1.51914H1.97224C1.98607 1.51914 1.99727 1.53202 1.99727 1.54792V1.80537C1.99727 2.3891 2.32082 2.90529 2.80233 3.08991L5.15637 3.99238C5.72712 4.21107 6.3459 4.04322 6.77135 3.55392L8.86535 1.14569C9.10987 0.86447 9.47087 0.787171 9.78496 0.948884C9.92552 1.02122 10.0786 1.09982 10.2421 1.18358L9.86196 1.65881C9.72149 1.83443 9.73133 2.10783 9.88404 2.26944C9.95622 2.34582 10.0474 2.3835 10.1384 2.3835C10.2397 2.3835 10.3408 2.33655 10.4149 2.24394L10.9674 1.55331C11.1723 1.65735 11.3873 1.76613 11.6105 1.87863L11.2883 2.28129C11.1479 2.45692 11.1577 2.73032 11.3104 2.89192C11.3826 2.96831 11.4738 3.00599 11.5647 3.00599C11.6661 3.00599 11.7672 2.95903 11.8413 2.86643L12.3391 2.24415C12.5501 2.34954 12.766 2.45686 12.9853 2.56548L12.7147 2.90378C12.5742 3.0794 12.5841 3.35281 12.7368 3.51441C12.809 3.59079 12.9002 3.62847 12.9911 3.62847C13.0925 3.62847 13.1936 3.58152 13.2677 3.48892L13.7179 2.92615C13.9331 3.03154 14.1501 3.13724 14.368 3.24268L14.1411 3.52627C14.0007 3.70189 14.0105 3.9753 14.1632 4.1369C14.2354 4.21328 14.3266 4.25096 14.4176 4.25096C14.5189 4.25096 14.62 4.20401 14.6941 4.1114L15.1055 3.59716C15.899 3.97573 16.6853 4.34093 17.4091 4.6615C16.3414 4.98417 14.1741 4.84553 11.3472 4.25339C10.9707 4.17453 10.5818 4.25614 10.2521 4.48335L7.02548 6.70642C5.83056 6.48137 4.9507 6.29966 4.60611 6.22726C4.1569 5.56575 3.55568 5.05344 2.8656 4.75583L0.989833 3.94689L1.09749 1.97814ZM0.745683 8.41654L0.940664 4.84882L2.60191 5.56526C3.31959 5.87478 3.91983 6.46962 4.29207 7.24018L5.34161 9.41285H1.57145C1.34239 9.41285 1.12941 9.30758 0.971741 9.11649C0.814114 8.92534 0.733871 8.67522 0.745683 8.41654ZM23.2396 8.60434C22.3472 8.90938 19.2364 9.87379 15.5994 9.87379C15.5431 9.87379 15.4878 9.8733 15.432 9.87309L17.1637 8.1503C17.2886 8.026 17.4508 7.94574 17.6204 7.92423C20.6976 7.53391 22.2884 6.88128 22.7979 6.63801C23.0729 6.97422 23.2396 7.42523 23.2396 7.91771V8.60434H23.2396Z"
                      fill="#6C7072"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_22108_10829">
                      <rect width="24" height="11" fill="white" />
                    </clipPath>
                  </defs>
                </svg>
              )}
              <h1>
                {field.type == "grass"
                  ? t({ uz: "Gazon", en: "Grass", ru: "Газон" })
                  : t({ uz: "Futzal", en: "Futsal", ru: "Футзал" })}
              </h1>
            </div>
            <h3 className="text-[#6C7072]">{field.expand?.size?.name}</h3>
          </div>
          <div className="bg-green-500/10 text-green-500 px-2 rounded-sm">
            <h1>{new Intl.NumberFormat("ru-RU").format(field.price)} UZS</h1>
          </div>
        </div>

        <div className="border-t mt-4 border-dashed border-[#989797] flex items-center justify-center gap-4  py-2">
          <div
            onClick={() => navigate("schedule/1")}
            className="w-[23.5%] h-[40px] rounded-sm bg-green-400/10 flex items-center justify-center"
          >
            <svg
              width="22"
              height="22"
              viewBox="0 0 22 22"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clipPath="url(#clip0_1_6889)">
                <path
                  d="M15.4444 0.916992V5.00138M6.55555 0.916992V5.00138M1 9.08577H21M3.22222 2.70391H18.7778C20.0051 2.70391 21 3.61823 21 4.74611V19.0415C21 20.1693 20.0051 21.0837 18.7778 21.0837H3.22222C1.99492 21.0837 1 20.1693 1 19.0415V4.74611C1 3.61823 1.99492 2.70391 3.22222 2.70391Z"
                  stroke="#42BA3D"
                  strokeWidth="1.5"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
                <path
                  d="M9 15L5 15"
                  stroke="#42BA3D"
                  strokeWidth="1.5"
                  strokeLinecap="round"
                />
                <path
                  d="M17 15H13"
                  stroke="#42BA3D"
                  strokeWidth="1.5"
                  strokeLinecap="round"
                />
              </g>
              <defs>
                <clipPath id="clip0_1_6889">
                  <rect width="22" height="22" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </div>
          <div className="w-[23.5%] h-[40px] rounded-sm bg-orange-400/10 flex items-center justify-center">
            <svg
              width="22"
              height="22"
              viewBox="0 0 22 22"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clipPath="url(#clip0_1_6899)">
                <rect width="22" height="22" fill="#FFEFD7" />
                <path
                  d="M9 14V8M13 14V8M21 11C21 16.5228 16.5228 21 11 21C5.47715 21 1 16.5228 1 11C1 5.47715 5.47715 1 11 1C16.5228 1 21 5.47715 21 11Z"
                  stroke="#FFB323"
                  strokeWidth="1.5"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
              </g>
              <defs>
                <clipPath id="clip0_1_6899">
                  <rect width="22" height="22" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </div>

          <div className="w-[23.5%] h-[40px] rounded-sm flex items-center justify-center bg-blue-400/10">
            <svg
              width="22"
              height="22"
              viewBox="0 0 22 22"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M10 3.00023H3C2.46957 3.00023 1.96086 3.21094 1.58579 3.58601C1.21071 3.96109 1 4.46979 1 5.00023V19.0002C1 19.5307 1.21071 20.0394 1.58579 20.4144C1.96086 20.7895 2.46957 21.0002 3 21.0002H17C17.5304 21.0002 18.0391 20.7895 18.4142 20.4144C18.7893 20.0394 19 19.5307 19 19.0002V12.0002M17.5 1.50023C17.8978 1.1024 18.4374 0.878906 19 0.878906C19.5626 0.878906 20.1022 1.1024 20.5 1.50023C20.8978 1.89805 21.1213 2.43762 21.1213 3.00023C21.1213 3.56284 20.8978 4.1024 20.5 4.50023L11 14.0002L7 15.0002L8 11.0002L17.5 1.50023Z"
                stroke="#0078FF"
                strokeWidth="1.5"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
            </svg>
          </div>
          <div className="w-[23.5%] h-[40px] rounded-sm bg-red-400/10 flex items-center justify-center">
            <svg
              width="22"
              height="22"
              viewBox="0 0 22 22"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M0.846191 4.87185H3.1026M3.1026 4.87185H21.1539M3.1026 4.87185V19.1718C3.1026 19.7136 3.34033 20.2333 3.76349 20.6164C4.18665 20.9995 4.76057 21.2147 5.35901 21.2147H16.6411C17.2395 21.2147 17.8134 20.9995 18.2366 20.6164C18.6597 20.2333 18.8975 19.7136 18.8975 19.1718V4.87185H3.1026ZM6.48722 4.87185V2.82899C6.48722 2.28719 6.72495 1.76758 7.1481 1.38447C7.57126 1.00136 8.14519 0.786133 8.74363 0.786133H13.2564C13.8549 0.786133 14.4288 1.00136 14.852 1.38447C15.2751 1.76758 15.5129 2.28719 15.5129 2.82899V4.87185M8.74363 9.97899V16.1076M13.2564 9.97899V16.1076"
                stroke="#FF5247"
                strokeWidth="1.5"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
            </svg>
          </div>
        </div>
      </div>
    </motion.div>
  );
};
